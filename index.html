<!DOCTYPE html>
 <html lang="pt-br">
     <head>
        <meta charset="utf-8">
         <!--Import Google Icon Font-->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
         <!--Import materialize.css-->
        <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>

        
      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>       
     </head>
          
     <body>
     <!--NavBar superior -->
     <nav class="blue darken-3 z-depth-0">
            <div class="nav-wrapper container">
              <a href="#!" class="brand-logo"><i class="material-icons">cloud</i>Sistema de Sorteio</a>
              <ul class="right hide-on-med-and-down">
                <li><a href="collapsible.html"><i class="material-icons">announcement</i></a></li>
                <li><a href="mobile.html"><i class="material-icons">notifications</i></a></li>
              </ul>
            </div>
            
        </nav>
        <!--NavBar Tabelas -->
        <nav class="blue darken-3 z-depth-0">
                <div class="nav-content">
                        <ul class="tabs tabs-transparent">
                          <li class="tab"><a href="index.html">Sorteio atual</a></li>
                          <li class="tab"><a href="history_sorteio.html">Historico de sorteios</a></li>                          
                          
                        </ul>
                </div>
        </nav>

        <div class="row">
          <form class="col s12" id="form_number">
            <div class="row">
              <div class="input-field col s6">
                <i class="material-icons prefix">reorder</i>
                <input id="name_db" type="text" class="validate" id="">
                <label for="icon_prefix">Nome do Sorteio</label>
              </div>
              <div class="input-field col s6">
                <i class="material-icons prefix">date_range</i>
                <input id="data_db" type="date" class="validate" id="">
                <label for="icon_telephone">Data</label>
              </div>
            </div>
            <a class="btn-floating btn-large waves-effect waves-light blue" onclick="generateRandomNumber();"><i class="material-icons">add</i></a>
          </form>
        </div>

        <div class="row">
            <div class="col s12 m6">
              <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                  <span class="card-title">NÃºmero sorteado</span>
                  <p id="display"></p>
                </div>                
              </div>
            </div>
          </div> 

          
          

     

       <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
       <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js"></script>

      <!-- Add Firebase products that you want to use -->
      <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-firestore.js"></script>



     <!-- Jquery-->
     <script scr="https://code.jquery.com/jquery-1.12.0.min.js"></script>
     <!--JavaScript at end of body for optimized loading-->
     <script type="text/javascript" src="js/materialize.min.js"></script>
     <!--App.js-->
     <script scr="js/app.js"></script>

     
     <script>
      const config = {
      //YOUR CONFIGS
      apiKey: "AIzaSyCVsPRUq6dAfLIA8YdQ4L0Qv0YFtxFY_e0",
      authDomain: "locobj-33bdb.firebaseapp.com",
      databaseURL: "https://locobj-33bdb.firebaseio.com",
      projectId: "locobj-33bdb",
      storageBucket: "locobj-33bdb.appspot.com",
      messagingSenderId: "472886762429",
      appId: "1:472886762429:web:e38fea18c31bac931650d4"
    };
    firebase.initializeApp(config);
    
    console.log(firebase);
   
    var db = firebase.firestore();

    
     

     function generateRandomNumber(){
         var rand1 = Math.floor(Math.random() *10)+1;
         var rand2 = Math.floor(Math.random() *10)+5;
         var rand3 = Math.floor(Math.random() *10)+5;
         var rand4 = Math.floor(Math.random() *10)+5;
         var rand5 = Math.floor(Math.random() *10)+5;

        //Pega os dados dos campos e transfere em variavei em js
         var numberToSend = document.getElementById('display').innerText = rand1 +" "+rand2 +" "+ rand3 +" "+ rand4 +" "+ rand5;
         var nomeToSend = document.getElementById('name_db').value;
         var dataToSend = document.getElementById('data_db').value;
          
         console.log(numberToSend);
         console.log(nomeToSend);
         console.log(dataToSend);
         db.collection("sorteio").add({
         first: nomeToSend,
         last: dataToSend,
         born: numberToSend
})
.then(function(docRef) {
    console.log("Document written with ID: ", docRef.id);
})
.catch(function(error) {
    console.error("Error adding document: ", error);
});
         
     }
     </script>
     <script>
      
    
     </script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    

    
     </body>

</html>